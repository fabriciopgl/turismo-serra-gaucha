(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2177:function(e,t,s){Promise.resolve().then(s.bind(s,9636))},9636:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7437),a=s(7948),l=s(7637),n=s(7446),i=s(1942),o=e=>{let{onSearch:t}=e,s=(0,r.jsx)(l.Y,{"aria-label":"Search",classNames:{inputWrapper:"bg-default-100",input:"text-sm"},endContent:(0,r.jsx)(n.C,{className:"hidden lg:inline-block",keys:["enter"]}),labelPlacement:"outside",placeholder:"Descobrir lugares...",startContent:(0,r.jsx)(i.U41,{}),type:"search",onChange:e=>{t(e.target.value)}});return(0,r.jsx)("div",{className:"hidden lg:flex",children:s})},c=s(9759),d=s(2354),u=s(6778),x=s(5448),h=s(3499),m=s(6463),f=s(2265);let g=e=>{let{size:t=24,width:s,height:a,strokeWidth:l=1.5,fill:n="none",...i}=e;return(0,r.jsx)("svg",{"aria-hidden":"true",fill:n,focusable:"false",height:t||a,role:"presentation",viewBox:"0 0 24 24",width:t||s,...i,children:(0,r.jsx)("path",{d:"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:l})})};function p(e){let{id:t,name:s,description:a,imageUrl:l,favorite:n}=e,i=(0,m.useRouter)(),{addFavorite:o,removeFavorite:f,favorites:p}=(0,c.r)();return(0,r.jsxs)(d.w,{className:"w-80 h-90 mx-auto shadow-lg transition-transform transform-gpu hover:scale-105 active:scale-100 cursor-pointer",children:[(0,r.jsx)(u.J,{src:l,alt:s,width:"100%",height:250,className:"object-cover rounded-t-lg"}),(0,r.jsxs)(x.G,{className:"flex flex-col h-full p-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:s}),(0,r.jsx)("section",{className:"text-sm text-gray-600 mb-4 flex-1",children:a}),(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center gap-2",children:[(0,r.jsx)(h.A,{onClick:()=>{i.push("/detalhes?placeId=".concat(t))},className:"mt-auto bg-green-800 text-white font-semibold py-2 rounded-lg transition-colors duration-300 hover:bg-green-700 w-full",children:"Ver mais"}),(0,r.jsx)(h.A,{isIconOnly:!0,className:"text-default-900/60 data-[hover]:bg-foreground/10",radius:"full",variant:"light",onPress:()=>{(null==p?void 0:p.includes(t))?f(t):o(t)},children:(0,r.jsx)(g,{className:n?"[&>path]:stroke-transparent fill-red-500":"",fill:n?"currentColor":"none",width:void 0,height:void 0})})]})]})]})}var v=s(749),j=s(3799);function b(){let{user:e,isAnonymous:t}=(0,v.a)(),{favorites:s,fetchFavorites:l,isLoading:n}=(0,c.r)(),{places:u,loading:m}=(0,j.i)(),[g,b]=(0,f.useState)(1),[y,w]=(0,f.useState)(u),[N,C]=(0,f.useState)(""),k=Math.ceil(y.length/9),S=9*g,A=y.slice(S-9,S);return(0,f.useEffect)(()=>{let e=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=e(N.trim().toLowerCase());w(u.filter(s=>{let r=e(s.name.toLowerCase()),a=e(s.description.toLowerCase());return r.includes(t)||a.includes(t)})),b(1)},[N,u]),(0,f.useEffect)(()=>{e&&!t&&0===s.length&&l(e.internalId)},[e,t]),(0,r.jsxs)("div",{className:"container mx-auto flex p-4",children:[(0,r.jsx)(a.Z,{className:"hidden md:block w-1/6 p-4 border-r border-gray-300"}),(0,r.jsxs)("div",{className:"flex-1 p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold",children:"Descubra a Serra Ga\xfacha"}),(0,r.jsx)("div",{className:"w-1/3",children:(0,r.jsx)(o,{onSearch:e=>{C(e)}})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 pt-8",children:m||n?Array.from({length:9}).map((e,t)=>(0,r.jsxs)(d.w,{className:"w-80 h-90 mx-auto shadow-lg animate-pulse",children:[(0,r.jsx)("div",{className:"bg-gray-300 h-[250px] w-full object-cover rounded-t-lg"}),(0,r.jsxs)(x.G,{className:"flex flex-col h-full p-4",children:[(0,r.jsx)("div",{className:"bg-gray-300 h-6 w-3/4 mb-4 rounded"}),(0,r.jsx)("div",{className:"bg-gray-300 h-4 w-full mb-4 rounded"}),(0,r.jsx)("div",{className:"bg-gray-300 h-4 w-5/6 rounded mb-4 flex-1"}),(0,r.jsxs)("div",{className:"flex flex-row justify-between items-center gap-2",children:[(0,r.jsx)("div",{className:"bg-gray-300 h-10 w-full rounded-lg"}),(0,r.jsx)("div",{className:"bg-gray-300 h-10 w-10 rounded-full"})]})]})]},t)):A.map(e=>(0,r.jsx)(p,{id:e.id,name:e.name,imageUrl:e.image,description:e.description,favorite:null==s?void 0:s.some(t=>t===e.id)},e.id))}),!m&&A.length>0?(0,r.jsxs)("div",{className:"flex justify-center items-center mt-8",children:[(0,r.jsx)(h.A,{startContent:(0,r.jsx)(i.x_l,{}),className:"px-4 py-2 mx-2 bg-gray-300 rounded disabled:opacity-50 cursor-pointer",onClick:()=>{g>1&&b(g-1)},isDisabled:1===g,children:"Anterior"}),(0,r.jsxs)("span",{className:"px-4",children:[g," de ",k]}),(0,r.jsx)(h.A,{endContent:(0,r.jsx)(i.Z1Y,{}),className:"px-4 py-2 mx-2 bg-gray-300 rounded disabled:opacity-50 cursor-pointer",onClick:()=>{g<k&&b(g+1)},isDisabled:g===k,children:"Pr\xf3xima"})]}):(0,r.jsx)("div",{className:"flex justify-center items-center mt-4",children:(0,r.jsx)(d.w,{children:(0,r.jsxs)(x.G,{className:"flex flex-row justify-center items-center gap-2",children:["Nenhum resultado encontrado, tente pesquisar novamente"," ",(0,r.jsx)(i.U41,{})]})})})]})]})}},7948:function(e,t,s){"use strict";var r=s(7437),a=s(2265),l=s(1942);t.Z=e=>{let{className:t}=e,[s,n]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"".concat(t),children:[(0,r.jsxs)("h2",{className:"flex text-xl font-bold mb-4 gap-2 justify-start items-center",children:[(0,r.jsx)(l.ulB,{})," Filtros"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Tipo:"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"restaurante",children:"Restaurantes"}),(0,r.jsx)("option",{value:"atracao",children:"Atra\xe7\xf5es"}),(0,r.jsx)("option",{value:"atracao",children:"Rota"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block mb-2",children:"Avalia\xe7\xe3o:"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"alta",children:"Alta"}),(0,r.jsx)("option",{value:"media",children:"M\xe9dia"}),(0,r.jsx)("option",{value:"media",children:"Baixa"})]})]})]})}},749:function(e,t,s){"use strict";s.d(t,{H:function(){return f},a:function(){return m}});var r=s(7437),a=s(3499),l=s(8472),n=s(9714),i=s(2265),o=s(1942);let c=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 -12 68 68",children:[(0,r.jsx)("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,r.jsx)("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,r.jsx)("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,r.jsx)("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]});function d(e){let{onSuccess:t}=e,s="805846529075-v4lkha22l3le1v2di45v1f79i3s27tp9.apps.googleusercontent.com",d="https://script.google.com/macros/s/AKfycbzhHrNvPvcGJLaiMevPmlWYg5GMQv1WLZ-VOqqEARvLetBSDc2P1-beB-WDniwUjCbtkg/exec";return(0,i.useEffect)(()=>{let e=async e=>{let s=(0,n.o)(e.credential);try{let e=await r(s);s.internalId=e,t(s)}catch(e){console.error("Error registering user:",e)}},r=async e=>{try{let t=await l.Z.post(d,e,{headers:{"Content-Type":"text/plain;charset=utf-8"}});return Number(t.data)}catch(e){console.error("Error sending data to Google Apps Script:",e)}},a=document.createElement("script");return a.src="https://accounts.google.com/gsi/client",a.async=!0,a.defer=!0,a.onload=()=>{window.google.accounts.id.initialize({client_id:s,callback:e,auto_select:!1,cancel_on_tap_out:!0}),window.google.accounts.id.disableAutoSelect(),window.google.accounts.id.renderButton(document.getElementById("signInDiv"),{theme:"outline",size:"large"})},document.body.appendChild(a),()=>{document.body.removeChild(a)}},[s,t,d]),(0,r.jsxs)("div",{className:"relative flex min-h-screen items-center justify-center bg-gray-100",children:[(0,r.jsx)("img",{alt:"Background",src:"/turismo-serra-gaucha/_next/static/media/waterfall_background.f8b95f9a.jpg",className:"absolute inset-0 w-full h-full object-cover opacity-50 z-0"}),(0,r.jsxs)("div",{className:"relative bg-white p-8 rounded-lg shadow-lg w-96 z-10",children:[(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex items-center text-xl font-semibold text-gray-700 p-2",children:[(0,r.jsx)(o.hRB,{className:"text-2xl mr-2"}),(0,r.jsx)("span",{style:{fontFamily:"'Lustria', sans-serif"},children:"Comino"})]}),(0,r.jsxs)(a.A,{variant:"bordered",startContent:(0,r.jsx)(c,{}),className:"w-full py-2 hover:bg-blue-50 hover:bg-opacity-80 border-[1px] border-[#dadce0] text-sm rounded-md flex justify-center items-center relative cursor-pointer mt-10",onClick:()=>window.google.accounts.id.prompt(),children:[(0,r.jsx)("div",{id:"signInDiv",className:"absolute inset-0 w-full h-full",style:{zIndex:1,opacity:0,pointerEvents:"auto"}}),(0,r.jsx)("span",{className:"flex-1 text-center z-0",style:{fontFamily:"'Google Sans', Arial, sans-serif"},children:"Entrar com Google"})]}),(0,r.jsxs)("div",{className:"flex items-center my-6",children:[(0,r.jsx)("hr",{className:"flex-1 border-t border-gray-300"}),(0,r.jsx)("span",{className:"mx-4 text-gray-500",children:"ou"}),(0,r.jsx)("hr",{className:"flex-1 border-t border-gray-300"})]}),(0,r.jsx)(a.A,{startContent:(0,r.jsx)(o.Xws,{}),onClick:()=>t("anonymous"),variant:"bordered",className:"w-full py-2 hover:bg-blue-50 hover:bg-opacity-80 border-[1px] border-[#dadce0] text-sm rounded-md",style:{fontFamily:"'Google Sans', Arial, sans-serif"},children:(0,r.jsx)("span",{className:"flex-1 text-center",children:"Acessar sem fazer login"})})]})]})}var u=s(2649),x=s(6463);let h=(0,i.createContext)(void 0),m=()=>{let e=(0,i.useContext)(h);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},f=e=>{let{children:t}=e,[s,a]=(0,i.useState)(null),[l,n]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!0),[m,f]=(0,i.useState)(!0),g=(0,x.useRouter)();(0,i.useEffect)(()=>{let e=u.Z.get("userCredentials");if(e){let t=JSON.parse(e);a(t),n(!0),c("anonymous"===t.sub)}else c(!0);f(!1)},[]);let p=e=>{if("anonymous"===e){let e={sub:"anonymous",internalId:0,name:"Visitante",given_name:"Visitante",family_name:"do Comino",email:"visitante@example.com",picture:""};a(e),c(!0),u.Z.set("userCredentials",JSON.stringify(e),{expires:1})}else a(e),c(!1),u.Z.set("userCredentials",JSON.stringify(e),{expires:1});n(!0),g.push("/")};return l||m?(0,r.jsx)(h.Provider,{value:{user:s,isLoggedIn:l,isAnonymous:o,handleLoginSuccess:p,handleLogout:()=>{u.Z.remove("userCredentials"),a(null),c(!0),n(!1),g.push("/")}},children:t}):(0,r.jsx)(d,{onSuccess:p})}},9759:function(e,t,s){"use strict";s.d(t,{r:function(){return d},s:function(){return c}});var r=s(7437),a=s(2265),l=s(8472),n=s(749);let i=(0,a.createContext)(void 0),o="https://script.google.com/macros/s/AKfycbxy_pI5KoHhXx0ewCtWdJWqtzTSrK5UtagWjUJveTKCt5CBSK357mwYbJ7wTGJ4dSP-uA/exec",c=e=>{let{children:t}=e,[s,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),{user:x,isAnonymous:h}=(0,n.a)(),m=async e=>{try{u(!0);let t=await l.Z.get("".concat(o,"?userId=").concat(e));c(t.data)}catch(e){console.error("Error fetching favorites:",e)}finally{u(!1)}},f=async e=>{c(t=>{let s=[...t,e];return x&&!h&&p(e,!0),s})},g=async e=>{c(t=>{let s=t.filter(t=>t!==e);return x&&!h&&p(e,!1),s})},p=async(e,t)=>{try{let s=null==x?void 0:x.internalId;await l.Z.post(o,{userId:s,placeId:e,isFavorite:t},{headers:{"Content-Type":"text/plain;charset=utf-8"}})}catch(e){console.error("Error updating favorite in sheet:",e)}};return(0,r.jsx)(i.Provider,{value:{favorites:s,addFavorite:f,removeFavorite:g,fetchFavorites:m,isLoading:d},children:t})},d=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useFavorites must be used within a FavoriteProvider");return e}},3799:function(e,t,s){"use strict";s.d(t,{Y:function(){return i},i:function(){return o}});var r=s(7437),a=s(8472),l=s(2265);let n=(0,l.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,l.useState)([]),[o,c]=(0,l.useState)(void 0),[d,u]=(0,l.useState)(!0),[x,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{u(!0),h(null);try{let e=await fetch("https://script.google.com/macros/s/AKfycbwAkmGG9Ehou1Q1tDQ4vD2ugnyARx0g_NpiIPuv7mpdvyDkL9dpt1zTkGFUEJvjtWyDyQ/exec");if(!e.ok)throw Error("Error fetching data: ".concat(e.status));let t=await e.json();i(t.data||[])}catch(e){h(e.message)}finally{u(!1)}})()},[]);let m=async e=>{try{u(!0);let t=await a.Z.get("".concat("https://script.google.com/macros/s/AKfycbwwy6xZlXO9Z8Gdv-B24B_B6OtMVfUv_kbs6WDlOxpa8c0ddIUOPe4kCg7SinS01n1buw/exec","?placeId=").concat(e));c(t.data[0])}catch(e){console.error("Error fetching place details")}finally{u(!1)}};return(0,r.jsx)(n.Provider,{value:{places:s,placeDetails:o,loading:d,error:x,fetchPlaceDetails:m},children:t})},o=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("usePlacesContext deve ser usado dentro de PlacesProvider");return e}}},function(e){e.O(0,[699,100,169,194,971,23,744],function(){return e(e.s=2177)}),_N_E=e.O()}]);