"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{7948:function(e,t,s){var r=s(7437),a=s(2265),l=s(1942),n=s(3799);t.Z=e=>{let{className:t}=e,[s,o]=(0,a.useState)(""),{places:i,setFilteredPlaces:c}=(0,n.i)();return(0,a.useEffect)(()=>{""===s?c(i):c(i.filter(e=>e.type.includes(s)))},[s,i,c]),(0,r.jsxs)("div",{className:"".concat(t),children:[(0,r.jsxs)("h2",{className:"flex text-xl font-bold mb-4 gap-2 justify-start items-center",children:[(0,r.jsx)(l.ulB,{})," Filtros"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block mb-2",children:"Tipo:"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded",value:s,onChange:e=>{o(e.target.value)},children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"restaurant",children:"Restaurantes"}),(0,r.jsx)("option",{value:"atraction",children:"Atra\xe7\xf5es"}),(0,r.jsx)("option",{value:"route",children:"Rota"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block mb-2",children:"Visibilidade:"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded",children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"alta",children:"Muito conhecido"}),(0,r.jsx)("option",{value:"media",children:"Conhecido na regi\xe3o"}),(0,r.jsx)("option",{value:"baixa",children:"Pouco conhecido"})]})]})]})]})}},749:function(e,t,s){s.d(t,{H:function(){return f},a:function(){return m}});var r=s(7437),a=s(3499),l=s(8472),n=s(9714),o=s(2265),i=s(1942);let c=()=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 -12 68 68",children:[(0,r.jsx)("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,r.jsx)("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,r.jsx)("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,r.jsx)("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]});function d(e){let{onSuccess:t}=e,[s,d]=(0,o.useState)(!1),u="805846529075-v4lkha22l3le1v2di45v1f79i3s27tp9.apps.googleusercontent.com",h="https://script.google.com/macros/s/AKfycbzhHrNvPvcGJLaiMevPmlWYg5GMQv1WLZ-VOqqEARvLetBSDc2P1-beB-WDniwUjCbtkg/exec";return(0,o.useEffect)(()=>{let e=async e=>{let r=(0,n.o)(e.credential);try{let e=await s(r);r.internalId=e,t(r)}catch(e){console.error("Error registering user:",e)}},s=async e=>{try{let t=await l.Z.post(h,e,{headers:{"Content-Type":"text/plain;charset=utf-8"}});return Number(t.data)}catch(e){console.error("Error sending data to Google Apps Script:",e)}},r=document.createElement("script");return r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{window.google.accounts.id.initialize({client_id:u,callback:e,auto_select:!1,cancel_on_tap_out:!0}),window.google.accounts.id.disableAutoSelect(),window.google.accounts.id.renderButton(document.getElementById("signInDiv"),{theme:"outline",size:"large"})},document.body.appendChild(r),()=>{document.body.removeChild(r)}},[u,t,h]),(0,r.jsxs)("div",{className:"relative flex min-h-screen items-center justify-center bg-gray-100",children:[(0,r.jsx)("img",{alt:"Background",src:"/turismo-serra-gaucha/_next/static/media/waterfall_background.f8b95f9a.jpg",className:"absolute inset-0 w-full h-full object-cover opacity-50 z-0"}),(0,r.jsxs)("div",{className:"relative bg-white p-8 rounded-lg shadow-lg w-96 z-10",children:[(0,r.jsxs)("div",{className:"absolute top-4 left-4 flex items-center text-xl font-semibold text-gray-700 p-2",children:[(0,r.jsx)(i.hRB,{className:"text-2xl mr-2"}),(0,r.jsx)("span",{style:{fontFamily:"'Lustria', sans-serif"},children:"Comino"})]}),s?(0,r.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,r.jsx)("div",{className:"w-10 h-10 border-t-2 border-blue-500 border-solid rounded-full animate-spin"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.A,{variant:"bordered",startContent:(0,r.jsx)(c,{}),className:"w-full py-2 hover:bg-blue-50 hover:bg-opacity-80 border-[1px] border-[#dadce0] text-sm rounded-md flex justify-center items-center relative cursor-pointer mt-10",onClick:()=>{d(!0),window.google.accounts.id.prompt()},children:[(0,r.jsx)("div",{id:"signInDiv",className:"absolute inset-0 w-full h-full",style:{zIndex:1,opacity:0,pointerEvents:"auto"}}),(0,r.jsx)("span",{className:"flex-1 text-center z-0",style:{fontFamily:"'Google Sans', Arial, sans-serif"},onClick:()=>{d(!0)},children:"Entrar com Google"})]}),(0,r.jsxs)("div",{className:"flex items-center my-6",children:[(0,r.jsx)("hr",{className:"flex-1 border-t border-gray-300"}),(0,r.jsx)("span",{className:"mx-4 text-gray-500",children:"ou"}),(0,r.jsx)("hr",{className:"flex-1 border-t border-gray-300"})]}),(0,r.jsx)(a.A,{startContent:(0,r.jsx)(i.Xws,{}),onClick:()=>{d(!0),t("anonymous")},variant:"bordered",className:"w-full py-2 hover:bg-blue-50 hover:bg-opacity-80 border-[1px] border-[#dadce0] text-sm rounded-md",style:{fontFamily:"'Google Sans', Arial, sans-serif"},children:(0,r.jsx)("span",{className:"flex-1 text-center",children:"Acessar sem fazer login"})})]})]})]})}var u=s(2649),h=s(6463);let x=(0,o.createContext)(void 0),m=()=>{let e=(0,o.useContext)(x);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},f=e=>{let{children:t}=e,[s,a]=(0,o.useState)(null),[l,n]=(0,o.useState)(!1),[i,c]=(0,o.useState)(!0),[m,f]=(0,o.useState)(!0),p=(0,h.useRouter)();(0,o.useEffect)(()=>{let e=u.Z.get("userCredentials");if(e){let t=JSON.parse(e);a(t),n(!0),c("anonymous"===t.sub)}else c(!0);f(!1)},[]);let v=e=>{if("anonymous"===e){let e={sub:"anonymous",internalId:0,name:"Visitante",given_name:"Visitante",family_name:"do Comino",email:"visitante@example.com",picture:""};a(e),c(!0),u.Z.set("userCredentials",JSON.stringify(e),{expires:1})}else a(e),c(!1),u.Z.set("userCredentials",JSON.stringify(e),{expires:1});n(!0),p.push("/")};return l||m?(0,r.jsx)(x.Provider,{value:{user:s,isLoggedIn:l,isAnonymous:i,handleLoginSuccess:v,handleLogout:()=>{u.Z.remove("userCredentials"),a(null),c(!0),n(!1),p.push("/")}},children:t}):(0,r.jsx)(d,{onSuccess:v})}},9759:function(e,t,s){s.d(t,{r:function(){return d},s:function(){return c}});var r=s(7437),a=s(2265),l=s(8472),n=s(749);let o=(0,a.createContext)(void 0),i="https://script.google.com/macros/s/AKfycbxy_pI5KoHhXx0ewCtWdJWqtzTSrK5UtagWjUJveTKCt5CBSK357mwYbJ7wTGJ4dSP-uA/exec",c=e=>{let{children:t}=e,[s,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),{user:h,isAnonymous:x}=(0,n.a)(),m=async e=>{try{u(!0);let t=await l.Z.get("".concat(i,"?userId=").concat(e));c(t.data)}catch(e){console.error("Error fetching favorites:",e)}finally{u(!1)}},f=async e=>{c(t=>{let s=[...t,e];return h&&!x&&v(e,!0),s})},p=async e=>{c(t=>{let s=t.filter(t=>t!==e);return h&&!x&&v(e,!1),s})},v=async(e,t)=>{try{let s=null==h?void 0:h.internalId;await l.Z.post(i,{userId:s,placeId:e,isFavorite:t},{headers:{"Content-Type":"text/plain;charset=utf-8"}})}catch(e){console.error("Error updating favorite in sheet:",e)}};return(0,r.jsx)(o.Provider,{value:{favorites:s,addFavorite:f,removeFavorite:p,fetchFavorites:m,isLoading:d},children:t})},d=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useFavorites must be used within a FavoriteProvider");return e}},3799:function(e,t,s){s.d(t,{Y:function(){return o},i:function(){return i}});var r=s(7437),a=s(2265),l=s(8472);let n=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(s),[d,u]=(0,a.useState)(void 0),[h,x]=(0,a.useState)(!0),[m,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{x(!0),f(null);try{let e=await fetch("https://script.google.com/macros/s/AKfycbwAkmGG9Ehou1Q1tDQ4vD2ugnyARx0g_NpiIPuv7mpdvyDkL9dpt1zTkGFUEJvjtWyDyQ/exec");if(!e.ok)throw Error("Error fetching data: ".concat(e.status));let t=await e.json();o(t.data||[]),c(t.data||[])}catch(e){f(e.message)}finally{x(!1)}})()},[]);let p=async e=>{try{x(!0);let t=await l.Z.get("".concat("https://script.google.com/macros/s/AKfycbwwy6xZlXO9Z8Gdv-B24B_B6OtMVfUv_kbs6WDlOxpa8c0ddIUOPe4kCg7SinS01n1buw/exec","?placeId=").concat(e));u(t.data[0])}catch(e){console.error("Error fetching place details")}finally{x(!1)}};return(0,r.jsx)(n.Provider,{value:{places:s,filteredPlaces:i,setFilteredPlaces:c,placeDetails:d,loading:h,error:m,fetchPlaceDetails:p},children:t})},i=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("usePlacesContext deve ser usado dentro de PlacesProvider");return e}}}]);